@model  AlertProfiler.CoreObject.DataTransferObjects.AccountAndAlertResponse
@{
    ViewBag.Title = "Subscribe";
    Layout = "~/Views/Shared/_LayoutAlert.cshtml";
}



    <div id="page-wrapper" style="margin-left: 0px; margin-right: 0px;">
        <div class="row">
            @if (Model.AlertDetails.NotificationDetails.Count()<=0)
            {
                <div class="alert alert-danger alert-dismissable" role="alert">
                    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">x</button>
                    <h5>@AlertProfiler.WebApp.Resources.SuscribeAlert.NO_ACCOUNT_MESSAGE </h5>
                </div>
            }
            @if (Model.ResponseCode != "00")
            {
                <div class="alert alert-danger alert-dismissable" role="alert">
                    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">x</button>
                    <h5>Message: @Model.ResponseMessage</h5>
                </div>
            }
        <span id="accountnumbermessage"></span>
           @if (Model.ResponseCode == "00")
            {
                <div class="col-md-12 col-sm-12 col-xs-12">
                     <div>
                         <hr>
                         <form action="~/SubscribeAlert/AlertSubscriberAction" method="post">
                             <div class="row">
                                 <h1 class="page-head-line">Account Details</h1>

                                 <div class="col-md-4 col-sm-6 col-xs-12">
                                     <img src="~/Images/enrolment_icon.jpg" />
                                 </div>

                                 <div class="col-md-8 col-sm-6 col-xs-12">
                                     <div class="panel-body" id="LoginDiv">
                                         <label>@AlertProfiler.WebApp.Resources.SuscribeAlert.ACCOUNT_NAME:</label>
                                         <div class="form-group input-group">
                                             <span style="font-size: 12px; color:firebrick"><strong>@Model.AccountDetails.AccountName</strong> </span>
                                         </div>
                                         <label>@AlertProfiler.WebApp.Resources.SuscribeAlert.ACCOUNT_TYPE:</label>
                                         <div class="form-group input-group">
                                             <span style="font-size: 12px; color:firebrick"><strong>@Model.AccountDetails.AccountType</strong> </span>
                                         </div>

                                         <label>@AlertProfiler.WebApp.Resources.SuscribeAlert.TICK_OPTIONS:</label>
                                         <hr />
                                         <input class="input-sm single-line" id="AccountNumber" name="AccountNumber" value="@Model.AccountDetails.AccountNumber" type="text" style="width: 50px;" hidden>
                                         <input class="input-sm single-line" id="RECID" name="RECID" value="@Model.AccountDetails.CustomerId" type="text" style="width: 50px;" hidden>


                                         @if (Model.AlertDetails.NotificationDetails.Count > 0)
                                         {
                                     <label>@AlertProfiler.WebApp.Resources.SuscribeAlert.MOBILE_ALERTS: </label>
                                             
                                             foreach (var item in Model.AlertDetails.NotificationDetails)
                                             {
                                                 if (item.PhoneEmail == "PHONE" && item.SetupType == "Finacle")
                                                 {
                                                     <div class="form-group input-group">
                                                         <input class="input-sm single-line checkboxAccountNumber" id="AccountNumber" name="MobileNumbers[]" type="checkbox" value="@item.MobileNumber" style="width: 50px;">
                                                         <span style="font-size: 11px;"><strong>@item.MobileNumber</strong></span>
                                                     </div>
                                                 }
                                             }

                                     <label>@AlertProfiler.WebApp.Resources.SuscribeAlert.EMAIL_ALERTS: </label>
                                            
                                             foreach (var item in Model.AlertDetails.NotificationDetails)
                                             {

                                                 if (item.PhoneEmail == "EMAIL" && item.SetupType == "Finacle")
                                                 {
                                                     <div class="form-group input-group">
                                                         <input class="input-sm single-line checkboxAccountNumber" id="AccountNumber" name="Emails[]" type="checkbox" value="@item.Email" style="width: 50px;">
                                                         <span style="font-size: 11px;"><strong>@item.Email</strong></span>
                                                     </div>
                                                 }
                                             }

                                             <br/><br/>


                                                  <label>@AlertProfiler.WebApp.Resources.SuscribeAlert.DESCRIPTION:</label>
                                             <div class="form-group input-group">
                                                 <textarea cols="5" rows="3" class="form-control input-sm text-box single-line" name="Description" required></textarea>
                                             </div>
                                         }




                                     <a href="~/SubscribeAlert/" class="alert-link btn btn-primary btn-xs float-left" title="Click to go back!"><< @AlertProfiler.WebApp.Resources.SuscribeAlert.BACK_BTN_VALUE</a>
                                         @if (Model.AlertDetails.NotificationDetails.Count > 0)
                                         {
                                     <button type="submit" class="btn btn-success btn-xs float-right" id="buttonSubmit">@AlertProfiler.WebApp.Resources.SuscribeAlert.SUBMIT_BTN_VALUE</button>
                                         }
                                     </div>
                                              </div>
                             </div>
                         </form>
                     </div>
                 </div>
            }
             
            
        </div>
    </div>




@section scripts {
    <script type="text/javascript">
        var selectedCheckBox = 0;
        $(document).ready(function () {

            $("#buttonSubmit").click(function (event) {

                if (($("input[class*='checkboxAccountNumber']:checked").length) <= 0) {
                    event.preventDefault();
                    alert("Please select at least any of the alert profiler option!");
                    $("#accountnumbermessage").html("Please select at least any of the alert profiler option!");
                    $("#accountnumbermessage").css("color", "red");
                }

            });
        });
    </script>
}
